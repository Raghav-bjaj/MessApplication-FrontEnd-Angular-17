
<mat-toolbar color="primary" *ngIf="authService.isLoggedIn$ | async">
  <span>Mess Management</span>
  <span class="toolbar-spacer"></span>

  <!-- Use ng-container to check the user's role -->
  <ng-container *ngIf="authService.userRole$ | async as role">

    <!-- ADMIN NAVIGATION -->
    <ng-container *ngIf="role === 'admin'">
      <a mat-button routerLink="/getStudents">Student List</a>
      <a mat-button routerLink="/students/dues">Dues Report</a>
      <button mat-button [matMenuTriggerFor]="adminMenu">More Actions</button>
      <mat-menu #adminMenu="matMenu">
        <button mat-menu-item routerLink="/menu/weekly">Weekly Menu</button>
        <button mat-menu-item routerLink="/students/detail">Student History</button>
        <button mat-menu-item routerLink="/students/add/new">Add Attendance</button>
        <button mat-menu-item routerLink="/students/update">Update Attendance</button>
        <button mat-menu-item routerLink="/students/delete">Delete Attendance</button>
        <button mat-menu-item routerLink="/students/total">Student Total Lookup</button>
      </mat-menu>
    </ng-container>

    <!-- STUDENT NAVIGATION -->
    <ng-container *ngIf="role === 'student'">
      <a mat-button routerLink="/menu/upcoming">Today's Menu</a>
      <a mat-button routerLink="/students/detail">My History</a>
      <a mat-button routerLink="/students/total">My Total</a>
    </ng-container>

    <!-- --- THIS IS THE NEW GUEST NAVIGATION --- -->
    <ng-container *ngIf="role === 'guest'">
      <a mat-button routerLink="/features">Features Showcase</a>
    </ng-container>

  </ng-container>

  <!-- Logout Button (visible to all logged-in users) -->
  <span class="auth-spacer"></span>
  <button mat-flat-button color="accent" (click)="authService.logout()">
    Logout
  </button>
</mat-toolbar>

